/**
 * User: Soezen
 * Date: 31/10/13
 * Time: 21:18
 */

var loader = require('./resource-loader');
var mundi = require('sur-snapps-mundi');

function index(request, response) {
    var locals = {
        menu: {
            items: [
                {key: 'dashboard', label: 'Home', roles: 'anonymous,user'},
                {key: 'login', label: 'Login', roles: 'anonymous'},
                {key: 'players', label: 'Players', roles: 'user'}
            ]
        }
    };
    loader.loadJade(response, 'index.jade', locals);
}

function players(request, response) {
    var locals = {
        players: mundi.players()
    };
    loader.loadJade(response, 'players.jade', locals);
}

function login(request, response) {
    loader.loadJade(response, 'login.jade', {});
}

function dashboard(request, response) {
    loader.loadJade(response, 'dashboard.jade', {});
}

exports.handle = {
    "/players"  : players,
    "/index"    : index,
    "/login"    : login,
    "/dashboard": dashboard
};