/**
 * User: Soezen
 * Date: 2/11/13
 * Time: 10:13
 */

var logger = require('./logger');

var mundi = {
    players: {}
};

function login(username) {
    var player = {
        name: username,
        nbrGamesWon: 0,
        nbrGamesLost: 0,
        roles: 'user'};
    mundi.players[username] = player;
    logger.info('user logged in: ' + username);
    return player;
}

function logout(username) {
    var player = mundi.players[username];
    delete mundi.players[username];
    logger.info('user logged out: ' + username);
    return player;
}

function players() {
    return mundi.players;
}

function findPlayer(username) {
    for (var i in mundi.players) {
        if (mundi.players.hasOwnProperty(i)) {
            var player = mundi.players[i];
            if (player.name == username) {
                return player;
            }
        }
    }
};

exports.players = players;
exports.findPlayer = findPlayer;
exports.login = login;
exports.logout = logout;